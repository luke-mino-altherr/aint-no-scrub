(function(e){function t(t){for(var o,c,l=t[0],i=t[1],u=t[2],s=0,b=[];s<l.length;s++)c=l[s],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&b.push(n[c][0]),n[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);d&&d(t);while(b.length)b.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],o=!0,l=1;l<a.length;l++){var i=a[l];0!==n[i]&&(o=!1)}o&&(r.splice(t--,1),e=c(c.s=a[0]))}return e}var o={},n={app:0},r=[];function c(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=o,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(a,o,function(t){return e[t]}.bind(null,o));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/aint-no-scrub/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=i;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"030f":function(e,t,a){"use strict";a("5af4")},2228:function(e,t,a){},"34a9":function(e,t,a){"use strict";a("9f2d")},"5af4":function(e,t,a){},"9f2d":function(e,t,a){},a766:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("7a23"),n={class:"relative bg-gray-300 font-sans"};function r(e,t,a,r,c,l){var i=Object(o["resolveComponent"])("Main");return Object(o["openBlock"])(),Object(o["createBlock"])("div",n,[Object(o["createVNode"])(i)])}var c=a("d4ec"),l=a("262e"),i=a("2caf"),u=a("9ab4"),d=a("ce1f"),s=Object(o["withScopeId"])("data-v-1dc3f5dd");Object(o["pushScopeId"])("data-v-1dc3f5dd");var b={class:"h-screen"},p={key:0},f=Object(o["createVNode"])("p",null,"Loading...",-1),O={key:1},j={class:"main"},h=Object(o["createVNode"])("h1",{class:"pt-8 pb-10 pr-4 text-xxxxl text-right"},"(Ain't No) Scrub",-1),v={class:"m-4 text-center rounded border bg-gray-500"},y=Object(o["createVNode"])("h2",{class:"p-4 text-xxl text-gray-300 text-left"},"Mixer",-1),g={class:"pt-4"},m={class:"flex m-3"},k={class:"m-0 w-screen fixed bottom-0 z-100 object-bottom"};Object(o["popScopeId"])();var N=s((function(e,t,a,n,r,c){var l=Object(o["resolveComponent"])("Visualiser"),i=Object(o["resolveComponent"])("AudioTrack"),u=Object(o["resolveComponent"])("Transport");return Object(o["openBlock"])(),Object(o["createBlock"])("div",b,[e.loaded?(Object(o["openBlock"])(),Object(o["createBlock"])("div",O,[Object(o["createVNode"])("div",j,[h,Object(o["createVNode"])("div",null,[Object(o["createVNode"])(l,{audioContext:e.audioContext,audioBuffer:e.rawBuffer,playing:e.playing,loaded:e.loaded},null,8,["audioContext","audioBuffer","playing","loaded"])]),Object(o["createVNode"])("div",v,[y,Object(o["createVNode"])("div",null,[Object(o["createVNode"])("div",g,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.trackCount,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])(i,{key:t,color:e.colorMap[t%5],trackNumber:t,audioContext:e.audioContext,audioBuffer:e.rawBuffer,playing:e.playing},null,8,["color","trackNumber","audioContext","audioBuffer","playing"])})),128))])]),Object(o["createVNode"])("div",m,[Object(o["createVNode"])("button",{class:"w-full uppercase animate-pulse bg-gray-100 pl-4 font-semibold text-center",onClick:t[1]||(t[1]=function(){return e.onTrackAdd&&e.onTrackAdd.apply(e,arguments)})},"Add Audio Track")])])]),Object(o["createVNode"])("div",k,[Object(o["createVNode"])(u,{audioContext:e.audioContext,audioBuffer:e.rawBuffer,playing:e.playing,loaded:e.loaded,onOnPlay:e.onPlay},null,8,["audioContext","audioBuffer","playing","loaded","onOnPlay"])])])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",p,[f]))])})),x=a("bee2"),V={class:"m-4 text-left border rounded bg-gray-200"},B={class:"p-2 text-align-left align-middle items-center flex"},C={class:"p-1 flex flex-0"},S={key:0,class:"inline"},w={key:1,class:"inline"},P={class:"p-1 flex flex-0"},F={class:"inline"},D={class:"pl-4"},A={key:0},L={class:"p-2"},T=Object(o["createVNode"])("label",null,"Playback Speed",-1),M={class:"p-2"},E=Object(o["createVNode"])("label",null,"Pan",-1),z={class:"p-2"},_=Object(o["createVNode"])("label",null,"Volume",-1),R={class:"p-2"},I=Object(o["createVNode"])("label",null,"Predelay (s)",-1),U={class:"p-2"},W=Object(o["createVNode"])("label",null,"Playback Locators",-1),G={class:"p-2"},H=Object(o["createVNode"])("label",null,"Looped",-1);function $(e,t,a,n,r,c){var l=Object(o["resolveComponent"])("fa"),i=Object(o["resolveComponent"])("VueSlider");return Object(o["openBlock"])(),Object(o["createBlock"])("div",V,[Object(o["createVNode"])("div",B,[Object(o["createVNode"])("div",C,[Object(o["createVNode"])("a",{onClick:t[1]||(t[1]=function(t){return e.collapsed=!e.collapsed})},[e.collapsed?(Object(o["openBlock"])(),Object(o["createBlock"])("h2",w,"▸")):(Object(o["openBlock"])(),Object(o["createBlock"])("h2",S,"▾"))])]),Object(o["createVNode"])("div",P,[e.enabled?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"border rounded-full h-5 w-5 text-xs inline text-green-500 border-green-500 hover:text-green-600 hover:border-green-600",onClick:t[2]||(t[2]=function(t){return e.enabled=!e.enabled})},[Object(o["createVNode"])(l,{class:"power-off",icon:"power-off"})])):Object(o["createCommentVNode"])("",!0),e.enabled?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,class:"border rounded-full h-5 w-5 text-xs inline text-red-500 border-red-500 hover:text-red-600 hover:border-red-600",onClick:t[3]||(t[3]=function(t){return e.enabled=!e.enabled})},[Object(o["createVNode"])(l,{class:"power-off",icon:"power-off"})]))]),Object(o["createVNode"])("h2",F,"Track "+Object(o["toDisplayString"])(e.trackNumber),1),Object(o["createVNode"])("div",D,[Object(o["createVNode"])("button",{class:"h-6 w-6",onClick:t[4]||(t[4]=function(){return e.trigger&&e.trigger.apply(e,arguments)})},[Object(o["createVNode"])(l,{class:"volume-up hover:text-gray-600",icon:"volume-up"})])])]),e.collapsed?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",A,[Object(o["createVNode"])("div",L,[T,Object(o["createVNode"])(i,{modelValue:e.playbackSpeed,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.playbackSpeed=t}),min:"0",max:"7",interval:"0.001"},null,8,["modelValue"])]),Object(o["createVNode"])("div",M,[E,Object(o["createVNode"])(i,{modelValue:e.panLocation,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.panLocation=t}),min:"-1",max:"1",interval:"0.1"},null,8,["modelValue"])]),Object(o["createVNode"])("div",z,[_,Object(o["createVNode"])(i,{modelValue:e.gain,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.gain=t}),min:"0",max:"1",interval:"0.1"},null,8,["modelValue"])]),Object(o["createVNode"])("div",R,[I,Object(o["createVNode"])(i,{modelValue:e.predelay,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.predelay=t}),min:"0",max:"5",interval:"0.1"},null,8,["modelValue"])]),Object(o["createVNode"])("div",U,[W,Object(o["createVNode"])(i,{modelValue:e.locator,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.locator=t}),min:"0",max:"1",interval:"0.0001"},null,8,["modelValue"]),Object(o["createVNode"])("label",null,"Duration: "+Object(o["toDisplayString"])((100*e.duration|e.round)/100),1),Object(o["createVNode"])("label",null,"; Normalized Duration: "+Object(o["toDisplayString"])((100*e.duration/e.playbackSpeed|e.round)/100),1)]),Object(o["createVNode"])("div",G,[H,Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"m-2",type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=function(t){return e.loop=t})},null,512),[[o["vModelCheckbox"],e.loop]])])]))])}a("a9e3");var q=a("1b40"),J=a("4971"),X=a.n(J),K=(a("24df"),function(e){Object(l["a"])(a,e);var t=Object(i["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.collapsed=!0,e.enabled=!0,e.locator=[0,1],e.predelay=0,e.playbackSpeed=1,e.panLocation=0,e.gain=1,e}return Object(x["a"])(a,[{key:"playbackStart",get:function(){return this.audioBuffer.duration*this.locator[0]}},{key:"playbackEnd",get:function(){return this.audioBuffer.duration*this.locator[1]}},{key:"duration",get:function(){return this.playbackEnd-this.playbackStart}},{key:"colorStyle",get:function(){return{backgroundColor:this.color}}},{key:"onPlayStateChange",value:function(){this.playing?this.playing&&this.enabled&&this.trigger():this.bufferSourceNode&&this.bufferSourceNode.stop(0)}},{key:"initializeDevice",value:function(){this.bufferSourceNode=this.audioContext.createBufferSource(),this.bufferSourceNode.buffer=this.audioBuffer,this.setLoopLocation(),this.setPlaybackSpeed(),this.panNode=this.audioContext.createStereoPanner(),this.setPanLocation(),this.gainNode=this.audioContext.createGain(),this.setGain(),this.bufferSourceNode.connect(this.panNode),this.panNode.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.bufferSourceNode.start(this.audioContext.currentTime+this.predelay,this.playbackStart)}},{key:"trigger",value:function(){this.bufferSourceNode&&this.bufferSourceNode.stop(0),this.initializeDevice()}},{key:"setPlaybackSpeed",value:function(){this.bufferSourceNode&&(this.bufferSourceNode.playbackRate.value=this.playbackSpeed)}},{key:"setPanLocation",value:function(){this.panNode&&this.panNode.pan.setValueAtTime(this.panLocation,0)}},{key:"setGain",value:function(){this.gainNode&&this.gainNode.gain.setValueAtTime(this.gain,0)}},{key:"setLoopLocation",value:function(){this.bufferSourceNode&&(this.bufferSourceNode.loopStart=this.playbackStart,this.bufferSourceNode.loopEnd=this.playbackEnd,this.bufferSourceNode.loop=this.loop)}}]),a}(d["b"]));Object(u["a"])([Object(q["a"])("playing")],K.prototype,"onPlayStateChange",null),Object(u["a"])([Object(q["a"])("playbackSpeed")],K.prototype,"setPlaybackSpeed",null),Object(u["a"])([Object(q["a"])("panLocation")],K.prototype,"setPanLocation",null),Object(u["a"])([Object(q["a"])("gain")],K.prototype,"setGain",null),Object(u["a"])([Object(q["a"])("locator")],K.prototype,"setLoopLocation",null),K=Object(u["a"])([Object(d["a"])({props:{trackNumber:Number,audioContext:AudioContext,audioBuffer:AudioBuffer,playing:Boolean,color:String},components:{VueSlider:X.a}})],K);var Q=K;a("030f");Q.render=$;var Y=Q,Z={class:"w-screen",ref:"visualiser"};function ee(e,t,a,n,r,c){return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])("canvas",Z,null,512)])}a("d81d");var te=a("2909"),ae=function(e){Object(l["a"])(a,e);var t=Object(i["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.loaded=!1,e.numberSamples=90,e}return Object(x["a"])(a,[{key:"mounted",value:function(){this.loaded&&this.drawWaveform()}},{key:"canvas",get:function(){return this.$refs.visualiser}},{key:"canvasCtx",get:function(){return this.canvas.getContext("2d")}},{key:"filteredData",get:function(){for(var e=this.audioBuffer.getChannelData(0),t=this.numberSamples,a=Math.floor(e.length/t),o=[],n=0;n<t;n++){for(var r=a*n,c=0,l=0;l<a;l++)c+=Math.abs(e[r+l]);o.push(c/a)}return o}},{key:"normalizedData",get:function(){var e=Math.pow(Math.max.apply(Math,Object(te["a"])(this.filteredData)),-1);return this.filteredData.map((function(t){return t*e}))}},{key:"drawWaveform",value:function(){var e=this;if(this.loaded){var t=function(e,t,a,o,n){e.lineWidth=2,e.strokeStyle="#000",e.beginPath(),a=n?a:-a,e.moveTo(t,0),e.lineTo(t,a),e.arc(t+o/2,a,o/2,Math.PI,0,n),e.lineTo(t+o,0),e.stroke()},a=function(){var a=window.devicePixelRatio||1,o=90;e.canvas.width=e.canvas.offsetWidth*a,e.canvas.height=(e.canvas.offsetHeight+2*o)*a,e.canvasCtx.scale(a,a),e.canvasCtx.translate(0,e.canvas.offsetHeight/2);for(var n=e.canvas.offsetWidth/e.normalizedData.length,r=0;r<e.normalizedData.length;r++){var c=n*r,l=e.normalizedData[r]*e.canvas.offsetHeight-o/2;l<0&&(l*=-1),l>e.canvas.offsetHeight/2&&(l=e.normalizedData.length-o/2),t(e.canvasCtx,c,l,n,(r+1)%2==0)}};a()}}}]),a}(d["b"]);Object(u["a"])([Object(q["a"])("loaded")],ae.prototype,"drawWaveform",null),ae=Object(u["a"])([Object(d["a"])({props:{trackNumber:Number,audioContext:AudioContext,audioBuffer:AudioBuffer,playing:Boolean,loaded:Boolean}})],ae);var oe=ae;oe.render=ee;var ne=oe,re={class:"border bg-opacity-100 bg-gray-700 transport p-4"},ce={class:"flex align-middle"},le={class:"flex-1 flex items-center"},ie={class:"flex-initial"},ue=Object(o["createVNode"])("b",null,"File Duration: ",-1),de=Object(o["createVNode"])("b",null,"Sample Length: ",-1),se=Object(o["createVNode"])("b",null,"Sample Rate:",-1);function be(e,t,a,n,r,c){return Object(o["openBlock"])(),Object(o["createBlock"])("div",re,[Object(o["createVNode"])("div",ce,[Object(o["createVNode"])("div",le,[this.playing?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,class:"border rounded-full h-14 w-14 text-xl hover:text-gray-400 hover:border-gray-400",disabled:!e.loaded,onClick:t[1]||(t[1]=function(){return e.onPlay&&e.onPlay.apply(e,arguments)})},"▶",8,["disabled"])),this.playing?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,class:"border rounded-full h-14 w-14 text-xl text-green-300 border-green-300 animate-pulse hover:text-green-400 hover:border-green-400",disabled:!e.loaded,onClick:t[2]||(t[2]=function(){return e.onPlay&&e.onPlay.apply(e,arguments)})},"▶",8,["disabled"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("ul",ie,[Object(o["createVNode"])("li",null,[ue,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(e.duration),1)]),Object(o["createVNode"])("li",null,[de,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(e.sampleDuration),1)]),Object(o["createVNode"])("li",null,[se,Object(o["createVNode"])("p",null,Object(o["toDisplayString"])(e.sampleRate),1)])])])])}var pe=function(e){Object(l["a"])(a,e);var t=Object(i["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.loaded=!1,e}return Object(x["a"])(a,[{key:"buttonText",get:function(){return this.playing?"Pause":"&#x25B6;"}},{key:"duration",get:function(){return this.loaded?this.audioBuffer.duration:0}},{key:"sampleDuration",get:function(){return this.loaded?this.audioBuffer.length:0}},{key:"sampleRate",get:function(){return this.loaded?this.audioBuffer.sampleRate:0}},{key:"onPlay",value:function(){this.$emit("onPlay")}}]),a}(d["b"]);pe=Object(u["a"])([Object(d["a"])({props:{trackNumber:Number,audioContext:AudioContext,audioBuffer:AudioBuffer,playing:Boolean,loaded:Boolean}})],pe);var fe=pe;a("34a9");fe.render=be;var Oe=fe,je=function(e){Object(l["a"])(a,e);var t=Object(i["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.audioContext=new AudioContext,e.trackCount=1,e.url="https://f002.backblazeb2.com/file/mino-altherr-public/blog/audio/sailure-to-sun.mp3",e.playing=!1,e.loaded=!1,e.colorMap2=["#D4CDFF","#CEE3FF","#C9FFD9","#FFFECB","#FFCED0","#FFBAE4"],e.colorMap=["#F400FF","#6F00EF","#007FFF","#77FB00","#FEFF00","#FAAB00"],e}return Object(x["a"])(a,[{key:"mounted",value:function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.url,!0),t.responseType="arraybuffer",t.onload=function(){e.audioContext.decodeAudioData(t.response,(function(t){e.rawBuffer=t,e.loaded=!0,console.log(e.rawBuffer)}),null)},t.send()}},{key:"onPlay",value:function(){console.log("hey"),this.playing=!this.playing}},{key:"onTrackAdd",value:function(){this.trackCount+=1}}]),a}(d["b"]);je=Object(u["a"])([Object(d["a"])({props:{},components:{AudioTrack:Y,Visualiser:ne,Transport:Oe}})],je);var he=je;a("f377");he.render=N,he.__scopeId="data-v-1dc3f5dd";var ve=he,ye=function(e){Object(l["a"])(a,e);var t=Object(i["a"])(a);function a(){return Object(c["a"])(this,a),t.apply(this,arguments)}return a}(d["b"]);ye=Object(u["a"])([Object(d["a"])({components:{Main:ve}})],ye);var ge=ye;a("f7a3");ge.render=r;var me=ge,ke=a("5502"),Ne=Object(ke["a"])({state:{},mutations:{},actions:{},modules:{}}),xe=(a("a766"),a("ecee")),Ve=a("c074");a("99af");function Be(e,t,a,n,r,c){return Object(o["openBlock"])(),Object(o["createBlock"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:e.$props.class,viewBox:"0 0 ".concat(e.width," ").concat(e.height)},[Object(o["createVNode"])("path",{fill:"currentColor",d:e.svgPath},null,8,["d"])],10,["viewBox"])}var Ce=Object(o["defineComponent"])({name:"FontAwesomeIcon",props:{icon:{type:String,required:!0},class:String},setup:function(e){var t=Object(o["computed"])((function(){return Object(xe["a"])({prefix:"fa",iconName:e.icon})}));console.log(t),console.log(e);var a=Object(o["computed"])((function(){return t.value.icon[0]})),n=Object(o["computed"])((function(){return t.value.icon[1]})),r=Object(o["computed"])((function(){return t.value.icon[4]}));return{width:a,height:n,svgPath:r}}});Ce.render=Be;var Se=Ce;xe["b"].add(Ve["a"]),xe["b"].add(Ve["b"]),Object(o["createApp"])(me).use(Ne).component("fa",Se).mount("#app")},eb66:function(e,t,a){},f377:function(e,t,a){"use strict";a("2228")},f7a3:function(e,t,a){"use strict";a("eb66")}});
//# sourceMappingURL=app.7c90118b.js.map